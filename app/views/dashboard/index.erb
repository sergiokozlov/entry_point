

<script type="text/javascript">
  $(document).ready( function () {
         jQuery.getJSON('/dashboard/daily_bars', function(data) {
          dailychart("#daily-bars",data[0].data);
          });
            $("#scrollF").click(function() {
           jQuery.getJSON('/dashboard/daily_bars/forward', function(data) {
               dailychart("#daily-bars",data[0].data);
               });    
          });
         $("#scrollB").click(function() {
          jQuery.getJSON('/dashboard/daily_bars/back', function(data) {
               dailychart("#daily-bars",data[0].data);
               });    
          });
     });
</script>

<%= render(:partial => "week_report") %>

<%= render (:partial => 'day_report')%>


<div class="clear"></div>

<div class="report weekly">
	<h2>Your Weekly Stats </h2>
	<table cellspacing="0">
		<thead>
          <th>Week</th>
          <th>Daily Average</th>
          <th># Working Days</th>
		  <th># Hours Spent</th>
		</thead>
        <tbody>
          <!--TODO: Performace optimization required -->
			<% @user.logged_working_weeks.slice(0,5).each do |lww| %>
			<tr title="Click to update the chart below" class = "<%= cycle("alt","white") -%>">
                <td><%= "#{week_first_day(lww[0]).to_s} - #{week_last_day(lww[0])}" %></td>
              	<td><%=to_time(week_average(lww[0]))%></td>
                <td><%=@user.weeked_working_days(lww[0]).length%> </td>
				<td><%=to_time(week_completed(lww[0]))%> </td>
			</tr>
			<%end%>
		</tbody>
	</table>
  </div>

 <div class="report daily">
	<h2>Your Daily Stats</h2>
	<div class="chart-head">
		<a id="chart-back" href="#">&laquo;</a> 
		25 Oct - 31 Oct 
		<a id="chart-forward" href="#">&raquo;</a>
	</div>
	<div class="inner">
		<img class="ajax-loader" src="/images/ajax-loader.gif" alt="" />
		<div id="daily-bars" class="graph"></div>
	</div>
	<!-- 
	<button id="scrollB" type="button">&lt;&lt;</button>
	<button id="scrollF" type="button">&gt;&gt;</button>
	-->
 </div> <!-- end .report -->

<div class="clear"></div>




