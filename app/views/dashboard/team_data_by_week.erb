
<%= javascript_include_tag 'jquery'  %>

<script type="text/javascript">
  $(document).ready( function () {
      $(".link_to_chart").click(function() {
           
            var row_number = $(this).parents("tr").get(0).rowIndex + 1;
            var x = $("#team_table").get(0).insertRow(row_number);
            // switch to jQuery style
            x.innerHTML="<td colspan='6'><div id='daily-bars' class='graph' style='width: 480px; height: 120px; margin: 20px;'></div></td>";
            jQuery.getJSON('/dashboard/daily_bars/forward', function(data) {
              dailychart(data.data);
            }); 
        });
     });
</script>          

<div class="report weekly">
	<table id ="team_table" cellspacing="0">
		<thead>
			<tr>
				<th>Team Member</th>
				<th>Week</th>
				<th># Working Days</th>
				<th># Hours Spent</th>
                <th>Daily Average</th>
                <th></th>
			</tr>
		</thead>
		<tbody>
		<%  @user.developers.each do |dev| -%>
			<tr class = "<%= cycle("alt","white") -%>">
				<td> <%=dev.name %> </td>
				<td> <%= week_value(@week_id) %></td>
				<td> <%=dev.weeked_working_days(@week_id).length%> </td>
				<td> <%=to_time(week_completed(@week_id,dev))%> </td>
                <td> <%=to_time(week_average(@week_id,dev))%></td>
                <td> <button id="<%=dev.id%>" class="link_to_chart" type="button">&gt;</button></td>
			</tr>
		<% end -%>
		</tbody>
	</table>
</div>


